<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muvi Fitness - Login</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                    url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1470&auto=format&fit=crop');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        }
    
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
    
        .login-container {
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(10px);
        border: 2px solid transparent;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        padding: 2rem;
        border-radius: 10px;
        color: white;
        max-width: 400px;
        width: 90%;
        position: relative;
        animation: borderGlow 3s ease-in-out infinite;
    }

    @keyframes borderGlow {
        0% {
            border-color: rgba(220, 53, 69, 0.6);
            box-shadow: 0 0 20px rgba(220, 53, 69, 0.2);
        }
        50% {
            border-color: rgba(220, 53, 69, 1);
            box-shadow: 0 0 30px rgba(220, 53, 69, 0.6);
        }
        100% {
            border-color: rgba(220, 53, 69, 0.6);
            box-shadow: 0 0 20px rgba(220, 53, 69, 0.2);
        }
    }

    /* Optional: Add hover effect */
    .login-container:hover {
        animation: borderGlow 1.5s ease-in-out infinite;
    }

    
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px;
            margin-bottom: 15px;
        }
    
        .form-control:focus {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            outline: none;
            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
            border-color: #dc3545;
        }
    
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
    
        .btn-login {
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 20px;
            width: 100%;
            margin-top: 1rem;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
    
        .btn-login:hover {
            background: #c82333;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }
    
        .logo-image {
            max-width: 150px;
            margin-bottom: 1.5rem;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
        }
    
        h2 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="text-center">
            <img src="Logo/muvi.lofo-removebg-preview.png" alt="Muvi Fitness" class="logo-image">
            <h2 class="mb-4">Login to Muvi Fitness</h2>
        </div>
        <form id="loginForm" onsubmit="return handleLogin(event)">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" id="username" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" required>
            </div>
            <button type="submit" class="btn btn-login">Login</button>
            <div class="text-center mt-3">
                <p>Don't have an account? <a href="#" onclick="showRegisterForm()" style="color: #dc3545;">Register</a></p>
            </div>
        </form>
    
    <!-- Add this new div for admin controls -->
    <div id="adminControls" class="text-center mt-3" style="display: none;">
        <button type="button" class="btn btn-secondary" onclick="showUserDetails()">View User Details</button>
    </div>
</div>
    

    <!-- Add Registration Form -->
    <!-- Update the registration form with more fields -->
    <div class="login-container" id="registerContainer" style="display: none;">
        <div class="text-center">
            <img src="Logo/muvi.lofo-removebg-preview.png" alt="Muvi Fitness" class="logo-image">
            <h2 class="mb-4">Register New Account</h2>
        </div>
        <form id="registerForm" onsubmit="return handleRegister(event)">
            <div class="form-group">
                <label for="newUsername">Username</label>
                <input type="text" class="form-control" id="newUsername" required>
            </div>
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" class="form-control" id="fullName" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" required>
            </div>
            <div class="form-group">
                <label for="newPassword">Password</label>
                <input type="password" class="form-control" id="newPassword" required>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" class="form-control" id="confirmPassword" required>
            </div>
            <button type="submit" class="btn btn-login">Register</button>
            <div class="text-center mt-3">
                <p>Already have an account? <a href="#" onclick="showLoginForm()" style="color: #dc3545;">Login</a></p>
            </div>
        </form>
    </div>

    <!-- Update the handleRegister function in your script section -->
    <script>
        function handleRegister(event) {
            event.preventDefault();
            
            const username = document.getElementById('newUsername').value;
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const password = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
    
            if (password !== confirmPassword) {
                Swal.fire({
                    title: 'Error!',
                    text: 'Passwords do not match!',
                    icon: 'error',
                    confirmButtonText: 'Try Again'
                });
                return false;
            }
    
            // Store user credentials and details
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            const userDetails = JSON.parse(localStorage.getItem('userDetails') || '{}');
            
            if (users[username]) {
                Swal.fire({
                    title: 'Error!',
                    text: 'Username already exists!',
                    icon: 'error',
                    confirmButtonText: 'Try Again'
                });
                return false;
            }
    
            // Store login credentials
            users[username] = password;
            localStorage.setItem('users', JSON.stringify(users));
    
            // Store user details
            // Inside handleRegister function, update the userDetails storage:
            userDetails[username] = {
                fullName: fullName,
                email: email,
                phone: phone,
                registrationDate: new Date().toISOString() // Changed to ISO format
            };
            localStorage.setItem('userDetails', JSON.stringify(userDetails));
    
            Swal.fire({
                title: 'Success!',
                text: 'Registration successful!',
                icon: 'success',
                timer: 1500,
                showConfirmButton: false
            }).then(() => {
                showLoginForm();
            });
    
            return false;
        }
    
        // Add function to view user details
        function showUserDetails() {
            const userDetails = JSON.parse(localStorage.getItem('userDetails') || '{}');
            let detailsHTML = Object.entries(userDetails).map(([username, details]) => `
                <div style="text-align: left; margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1);">
                    <strong>Username:</strong> ${username}<br>
                    <strong>Name:</strong> ${details.fullName}<br>
                    <strong>Email:</strong> ${details.email}<br>
                    <strong>Phone:</strong> ${details.phone}<br>
                    <strong>Registered:</strong> ${details.registrationDate}
                </div>
            `).join('');
    
            Swal.fire({
                title: 'Registered Users Details',
                html: detailsHTML || 'No registered users',
                icon: 'info',
                width: '600px'
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Check if user is already logged in
        window.onload = function() {
            if (localStorage.getItem('isLoggedIn') === 'true') {
                window.location.href = 'index.html';
            }
        }

        function showRegisterForm() {
            document.querySelector('.login-container').style.display = 'none';
            document.getElementById('registerContainer').style.display = 'block';
        }

        function showLoginForm() {
            document.querySelector('.login-container').style.display = 'block';
            document.getElementById('registerContainer').style.display = 'none';
        }

        // Update the login handler to check custom credentials
        // Add this function at the top of your script section
        // Add this after successful login validation
        function recordLogin(username) {
            const loginHistory = JSON.parse(localStorage.getItem('loginHistory') || '[]');
            const loginRecord = {
                username: username,
                timestamp: new Date().toISOString(),
                device: `${navigator.platform} - ${navigator.userAgent}`
            };
            loginHistory.push(loginRecord);
            localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
        }

        // Add this call in your login success handler
        if (loginSuccess) {
            recordLogin(username);
            localStorage.setItem('currentUser', username);
            localStorage.setItem('isLoggedIn', 'true');
            window.location.href = username === 'admin' ? 'admin-dashboard.html' : 'index.html';
        }

        // Keep only this version of the recordLogin function
        function recordLogin(username) {
            const loginHistory = JSON.parse(localStorage.getItem('loginHistory') || '[]');
            const loginRecord = {
                username: username,
                timestamp: new Date().toISOString(),
                device: `${navigator.platform} - ${navigator.userAgent}`
            };
            loginHistory.push(loginRecord);
            localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
        }

        // Update the handleLogin function
        function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const users = JSON.parse(localStorage.getItem('users') || '{}');
        
            if (username === 'admin' && password === 'admin123') {
                // Admin login
                recordLogin('admin');
                localStorage.setItem('currentUser', 'admin');
                localStorage.setItem('isLoggedIn', 'true');
                
                Swal.fire({
                    title: 'Success!',
                    text: 'Admin Login successful',
                    icon: 'success',
                    timer: 1500,
                    showConfirmButton: false
                }).then(() => {
                    window.location.href = 'admin-dashboard.html';
                });
            } else if (users[username] && users[username] === password) {
                // User login
                recordLogin(username);
                localStorage.setItem('currentUser', username);
                localStorage.setItem('isLoggedIn', 'true');
                
                Swal.fire({
                    title: 'Success!',
                    text: 'Login successful',
                    icon: 'success',
                    timer: 1500,
                    showConfirmButton: false
                }).then(() => {
                    window.location.href = 'index.html';
                });
            } else {
                Swal.fire({
                    title: 'Error!',
                    text: 'Invalid username or password',
                    icon: 'error',
                    confirmButtonText: 'Try Again'
                });
            }
            return false;
        }
    function showRegisteredUsers() {
        const users = JSON.parse(localStorage.getItem('users') || '{}');
        Swal.fire({
            title: 'Registered Users',
            html: Object.entries(users).map(([username, password]) => 
                `Username: ${username}<br>Password: ${password}<br><br>`
            ).join(''),
            icon: 'info'
        });
    }
    </script>
</body>
</html>